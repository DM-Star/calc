<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>观察力训练</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles_ob.css">
</head>
<body>
    <!-- 主菜单界面 -->
    <div id="main-menu" class="screen active">
        <div class="container">
            <h1>观察力训练</h1>
            
            <div class="practice-selector">
                <button class="practice-btn primary-btn" onclick="showScreen('setup-screen')">
                    宝石迷阵
                </button>
                <button class="practice-btn primary-btn" onclick="showScreen('grid-setup-screen')">
                    格子画
                </button>
            </div>
            
            <div style="margin-top: 20px; text-align: center;">
                <a href="index.html" class="nav-link">计算力训练</a>
            </div>
            
            <div style="margin-top: 10px; text-align: center; color: #666; font-size: 14px;">
                作者：王宇轩
            </div>
        </div>
    </div>
    
    <!-- 宝石迷阵设置界面 -->
    <div id="setup-screen" class="screen">
        <div class="container">
            <h2>训练设置</h2>
            
            <div class="setup-form">
                <div class="form-group">
                    <label class="form-label">随机数种（可选）</label>
                    <input type="number" id="random-seed" class="form-input" 
                           placeholder="留空则随机生成" min="1" max="999999">
                    <small style="color: #666;">输入相同的数种可以重现相同的题目</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">棋盘长度</label>
                    <input type="number" id="board-size" class="form-input" 
                           value="10" min="5" max="20">
                    <small style="color: #666;">棋盘的行列数，影响题目难度</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">棋盘数量</label>
                    <input type="number" id="board-count" class="form-input" 
                           value="15" min="10" max="50">
                    <small style="color: #666;">生成的棋盘总数，影响题目难度</small>
                </div>
                

                
                <div class="control-buttons">
                    <button class="control-btn primary-btn" onclick="startTraining()">
                        开始训练
                    </button>
                    <button class="control-btn secondary-btn" onclick="showScreen('main-menu')">
                        返回主菜单
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 格子画设置界面 -->
    <div id="grid-setup-screen" class="screen">
        <div class="container">
            <h2>训练设置</h2>
            
            <div class="setup-form">
                <div class="form-group">
                    <label class="form-label">随机数种（可选）</label>
                    <input type="number" id="grid-random-seed" class="form-input" 
                           placeholder="留空则随机生成" min="1" max="999999">
                    <small style="color: #666;">输入相同的数种可以重现相同的画作</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">画布尺寸</label>
                    <input type="number" id="canvas-size" class="form-input" 
                           value="100" min="10" max="200">
                    <small style="color: #666;">画布的边长尺寸，影响画作复杂度</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">画作数量</label>
                    <input type="number" id="painting-count" class="form-input" 
                           value="30" min="5" max="60">
                    <small style="color: #666;">生成的画作总数，影响题目难度</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">观察区域大小</label>
                    <input type="number" id="observation-region-size" class="form-input" 
                           value="25" min="3" max="100">
                    <small style="color: #666;">观察区域的边长尺寸，影响题目难度</small>
                </div>
                
                <div class="control-buttons">
                    <button class="control-btn primary-btn" onclick="startGridTraining()">
                        开始训练
                    </button>
                    <button class="control-btn secondary-btn" onclick="showScreen('main-menu')">
                        返回主菜单
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 宝石迷阵答题界面 -->
    <div id="practice-screen" class="screen">
        <div class="container">
            <h2>宝石迷阵</h2>
            
            <!-- 游戏信息面板 -->
            <div class="game-info-panel">
                <div class="info-item">
                    <span class="info-label">用时</span>
                    <span class="info-value" id="game-time">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">当前题目</span>
                    <span class="info-value" id="current-question">1/5</span>
                </div>
                <div class="info-item">
                    <span class="info-label">跑动时间</span>
                    <span class="info-value" id="running-time">0秒</span>
                </div>
                <div class="info-item">
                    <span class="info-label">随机数种</span>
                    <span class="info-value" id="seed-value">随机生成</span>
                </div>
            </div>
            
            <!-- 进度条 -->
            <div class="progress-container">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <!-- 当前题目区域 -->
            <div class="board-container">
                <div class="board-title">观察区域（5×5）</div>
                <canvas id="question-board" class="board-canvas" width="150" height="150"></canvas>
            </div>
            
            <!-- 答题区域 -->
            <div class="answer-area">
                <div class="answer-label">这个区域属于哪个棋盘？（1-<span id="max-board-number"></span>）</div>
                <input type="number" id="answer-input" class="answer-input" min="1">
                <div class="feedback" id="feedback"></div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <div class="navigation-buttons">
                    <button class="control-btn secondary-btn" onclick="prevQuestion()">
                        上一题
                    </button>
                    <button class="control-btn primary-btn" onclick="submitAllAnswers()">
                        提交全部答案
                    </button>
                    <button class="control-btn secondary-btn" onclick="nextQuestion()">
                        下一题
                    </button>
                </div>
                <div class="action-buttons">
                    <button class="control-btn warning-btn" onclick="showObservationScreen()">
                        观察棋盘（+10秒）
                    </button>                    <button class="control-btn secondary-btn" onclick="exitTraining()">
                        退出训练
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 格子画答题界面 -->
    <div id="grid-practice-screen" class="screen">
        <div class="container">
            <h2>蒙德里安格子画</h2>
            
            <!-- 游戏信息面板 -->
            <div class="game-info-panel">
                <div class="info-item">
                    <span class="info-label">用时</span>
                    <span class="info-value" id="grid-game-time">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">当前题目</span>
                    <span class="info-value" id="grid-current-question">1/5</span>
                </div>
                <div class="info-item">
                    <span class="info-label">跑动时间</span>
                    <span class="info-value" id="grid-running-time">0秒</span>
                </div>
                <div class="info-item">
                    <span class="info-label">随机数种</span>
                    <span class="info-value" id="grid-seed-value">随机生成</span>
                </div>
            </div>
            
            <!-- 进度条 -->
            <div class="progress-container">
                <div class="progress-fill" id="grid-progress-fill"></div>
            </div>
            
            <!-- 当前题目区域 -->
            <div class="board-container">
                <div class="board-title">观察区域</div>
<canvas id="grid-question-board" class="board-canvas"></canvas>
            </div>
            
            <!-- 答题区域 -->
            <div class="answer-area">
                <div class="answer-label">这个区域属于哪幅画作？（1-<span id="max-painting-number"></span>）</div>
                <input type="number" id="grid-answer-input" class="answer-input" min="1">
                <div class="feedback" id="grid-feedback"></div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <div class="navigation-buttons">
                    <button class="control-btn secondary-btn" onclick="gridPrevQuestion()">
                        上一题
                    </button>
                    <button class="control-btn primary-btn" onclick="gridSubmitAllAnswers()">
                        提交全部答案
                    </button>
                    <button class="control-btn secondary-btn" onclick="gridNextQuestion()">
                        下一题
                    </button>
                </div>
                <div class="action-buttons">
                    <button class="control-btn warning-btn" onclick="showGridObservationScreen()">
                        观察画作（+10秒）
                    </button>
                    <button class="control-btn secondary-btn" onclick="gridExitTraining()">
                        退出训练
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 宝石迷阵观察界面 -->
    <div id="observation-screen" class="screen">
        <div class="container">
            <h2>观察棋盘 - <span id="board-count-display"></span>个棋盘</h2>
            
            <div class="game-info-panel">
                <div class="info-item">
                    <span class="info-label">已用时</span>
                    <span class="info-value" id="obs-time">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">跑动时间</span>
                    <span class="info-value" id="obs-running-time">0秒</span>
                </div>
                <div class="info-item">
                    <span class="info-label">当前题目</span>
                    <span class="info-value" id="obs-current-question">1/5</span>
                </div>
            </div>
            
            <!-- 单棋盘显示区域 -->
            <div class="single-board-container">
                <div class="board-navigation">
                    <button class="nav-btn secondary-btn" onclick="prevBoard()">
                        上一个棋盘
                    </button>
                    <span class="board-counter" id="board-counter">棋盘 1/</span>
                    <button class="nav-btn secondary-btn" onclick="nextBoard()">
                        下一个棋盘
                    </button>
                </div>
                
                <div class="board-display">
                    <canvas id="single-observation-board" class="single-board-canvas" width="450" height="450"></canvas>
                </div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <button class="control-btn primary-btn" onclick="showPracticeScreen()">
                    回到答题区（+10秒）
                </button>
            </div>
        </div>
    </div>
    
    <!-- 格子画观察界面 -->
    <div id="grid-observation-screen" class="screen">
        <div class="container">
            <h2>观察画作</h2>
            
            <div class="game-info-panel">
                <div class="info-item">
                    <span class="info-label">已用时</span>
                    <span class="info-value" id="grid-obs-time">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">跑动时间</span>
                    <span class="info-value" id="grid-obs-running-time">0秒</span>
                </div>
                <div class="info-item">
                    <span class="info-label">当前题目</span>
                    <span class="info-value" id="grid-obs-current-question">1/5</span>
                </div>
            </div>
            
            <!-- 单画作显示区域 -->
            <div class="single-board-container">
                <div class="board-navigation">
                    <button class="nav-btn secondary-btn" onclick="gridPrevPainting()">
                        上一幅画
                    </button>
                    <span class="board-counter" id="painting-counter">画作 1/</span>
                    <button class="nav-btn secondary-btn" onclick="gridNextPainting()">
                        下一幅画
                    </button>
                </div>
                
                <div class="board-display">
                    <canvas id="single-grid-observation-board" class="single-board-canvas" width="450" height="450"></canvas>
                </div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <button class="control-btn primary-btn" onclick="showGridPracticeScreen()">
                    回到答题区（+10秒）
                </button>
            </div>
        </div>
    </div>
    
    <!-- 宝石迷阵结果界面 -->
    <div id="result-screen" class="screen">
        <div class="container">
            <h2>训练结果</h2>
            
            <!-- 统计信息 -->
            <div class="result-stats">
                <div>总用时：<span id="total-time">0</span>秒</div>
                <div>跑动时间：<span id="final-running-time">0</span>秒</div>
                <div>随机数种：<span id="final-seed">随机生成</span></div>
            </div>
            
            <!-- 题目结果列表 -->
            <div class="results-list-container">
                <h3>题目作答结果</h3>
                <div id="results-list" class="results-list"></div>
            </div>
            
            <!-- 棋盘观察区域 -->
            <div class="result-observation-container">
                <h3>观察正确答案</h3>
                <div class="board-navigation">
                    <button class="nav-btn secondary-btn" onclick="resultPrevBoard()">
                        上一个棋盘
                    </button>
                    <span class="board-counter" id="result-board-counter">棋盘 1/</span>
                    <button class="nav-btn secondary-btn" onclick="resultNextBoard()">
                        下一个棋盘
                    </button>
                </div>
                
                <div class="board-display">
<canvas id="result-observation-board" class="single-board-canvas" width="450" height="450"></canvas>
                </div>
                
                <div class="answer-highlight">
                    <span class="highlight-label">✓ 正确答案区域已标记为绿色</span>
                </div>
            </div>
            
            <!-- 分享区域 -->
            <div class="share-container">
                <h3>分享本次训练</h3>
                <div class="share-info">
                    <p id="share-message">本次训练总用时：0秒（含跑动时间0秒）（随机数种：随机生成）</p>
                    <div class="share-link-container">
                        <input type="text" id="share-link" class="share-link-input" readonly>
                        <button class="share-btn secondary-btn" onclick="copyShareLink()">
                            复制链接
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <button class="control-btn primary-btn" onclick="showScreen('main-menu')">
                    返回主菜单
                </button>
                <button class="control-btn secondary-btn" onclick="showScreen('setup-screen')">
                    重新开始
                </button>
            </div>
        </div>
    </div>
    
    <!-- 格子画结果界面 -->
    <div id="grid-result-screen" class="screen">
        <div class="container">
            <h2>训练结果</h2>
            
            <!-- 统计信息 -->
            <div class="result-stats">
                <div>总用时：<span id="grid-total-time">0</span>秒</div>
                <div>跑动时间：<span id="grid-final-running-time">0</span>秒</div>
                <div>随机数种：<span id="grid-final-seed">随机生成</span></div>
            </div>
            
            <!-- 题目结果列表 -->
            <div class="results-list-container">
                <h3>题目作答结果</h3>
                <div id="grid-results-list" class="results-list"></div>
            </div>
            
            <!-- 画作观察区域 -->
            <div class="result-observation-container">
                <h3>观察正确答案</h3>
                <div class="board-navigation">
                    <button class="nav-btn secondary-btn" onclick="gridResultPrevPainting()">
                        上一幅画
                    </button>
                    <span class="board-counter" id="grid-result-painting-counter">画作 1/</span>
                    <button class="nav-btn secondary-btn" onclick="gridResultNextPainting()">
                        下一幅画
                    </button>
                </div>
                
                <div class="board-display">
                    <canvas id="grid-result-observation-board" class="single-board-canvas"></canvas>
                </div>
                
                <div class="answer-highlight">
                    <span class="highlight-label">✓ 正确答案区域已标记为绿色</span>
                </div>
            </div>
            
            <!-- 分享区域 -->
            <div class="share-container">
                <h3>分享本次训练</h3>
                <div class="share-info">
                    <p id="grid-share-message">本次训练总用时：0秒（含跑动时间0秒）（随机数种：随机生成）</p>
                    <div class="share-link-container">
                        <input type="text" id="grid-share-link" class="share-link-input" readonly>
                        <button class="share-btn secondary-btn" onclick="gridCopyShareLink()">
                            复制链接
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 控制按钮 -->
            <div class="control-buttons">
                <button class="control-btn primary-btn" onclick="showScreen('main-menu')">
                    返回主菜单
                </button>
                <button class="control-btn secondary-btn" onclick="showScreen('grid-setup-screen')">
                    重新开始
                </button>
            </div>
        </div>
    </div>
    
    <!-- 引用独立的JavaScript文件 -->
    <script src="script_ob.js"></script>
</body>
</html>